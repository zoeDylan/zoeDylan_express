/*
 * 参数合并
 * 
 * <参数(obj),默认参数(obj),是否覆盖[true](boole),fn(function(op))>
 */
module.exports = function (op, def, cover, fn) {
    cover = ((type(cover) == 'boolean')?cover:(type(cover) == 'function')?(type(fn) == 'boolean')?fn:true:true);
    fn = ((type(fn) == 'function')?fn:(type(cover) == 'function')?cover:function (def) { });
    
    if (!op || op == null) {
        fn(def);
        return def;
    }
    if (!def || def == null) {
        fn(op);
        return op;
    }
    //循环获取变量
    for (var i in op) {
        var tmp = op[i];
        if (typeof (def[i]) != 'undefined' && cover) {
            def[i] = tmp;
        }
    }
    fn(def);
    return def;
} 